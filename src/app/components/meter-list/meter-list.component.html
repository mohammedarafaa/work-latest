<div class="meter-list-container">
  <div class="header">
    <h2>Meters</h2>
    <button class="btn btn-primary" routerLink="/meters/new">Add New Meter</button>
  </div>

  <div *ngIf="loading" class="loading">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error" class="table-responsive d-none d-md-block">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>{{ 'serial' | translate }}</th>
          <th>{{ 'Type' | translate }}</th>
          <th>{{ 'port' | translate }}</th>
          <th>{{ 'Model' | translate }}</th>
          <th>{{ 'Customer' | translate }}</th>
          <th>{{ 'Property' | translate }}</th>
          <th>{{ 'Actions' | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let meter of meters">
          <td>{{ meter.serial }}</td>
          <td>
            <span class="badge" [ngClass]="{
              'bg-primary': meter.type === 'GAS',
              'bg-info': meter.type === 'WATER',
              'bg-warning': meter.type === 'ELCTRICTY'
            }">
              {{ meter.type | translate }}
            </span>
          </td>
          <td>{{ meter.port }}</td>
          <td>{{ meter.model }}</td>
          <td>{{ meter.customer.fullName }}</td>
          <td>{{ meter.property.propertyNo }}</td>
          <td>
            <div class="btn-group">
              <button class="btn btn-sm btn-primary" [routerLink]="['/meters', meter.code]">
                <i class="bi bi-pencil"></i> {{ 'Edit_Profile' | translate }}
              </button>
              <button class="btn btn-sm btn-danger" (click)="deleteMeter(meter.code)">
                <i class="bi bi-trash"></i> {{ 'Delete' | translate }}
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && !error" class="d-block d-md-none">
    <div class="row">
      <div class="col-12 mb-3" *ngFor="let meter of meters">
        <div class="card meter-card">
          <div class="card-body">
            <h5 class="card-title">{{ 'Meter' | translate }}: {{ meter.serial }}</h5>
            <p class="card-text"><strong>{{ 'Type' | translate }}:</strong> {{ meter.type | translate }}</p>
            <p class="card-text"><strong>{{ 'port' | translate }}:</strong> {{ meter.port }}</p>
            <p class="card-text"><strong>{{ 'Model' | translate }}:</strong> {{ meter.model }}</p>
            <p class="card-text"><strong>{{ 'Customer' | translate }}:</strong> {{ meter.customer.fullName }}</p>
            <p class="card-text"><strong>{{ 'Property' | translate }}:</strong> {{ meter.property.propertyNo }}</p>
            <div class="d-flex justify-content-between mt-3">
              <button class="btn btn-sm btn-primary" [routerLink]="['/meters', meter.code]">
                <i class="bi bi-pencil"></i> {{ 'Edit_Profile' | translate }}
              </button>
              <button class="btn btn-sm btn-danger" (click)="deleteMeter(meter.code)">
                <i class="bi bi-trash"></i> {{ 'Delete' | translate }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 